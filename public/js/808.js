"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[808],{2562:(t,e,i)=>{i.d(e,{Z:()=>s});var a=i(3645),n=i.n(a)()((function(t){return t[1]}));n.push([t.id,".date-picker[data-v-f8f5dfac]{display:flex}.date-picker__item[data-v-f8f5dfac]{margin-right:8px}.date-picker__day[data-v-f8f5dfac]{width:40px}.date-picker__month[data-v-f8f5dfac]{width:100px}.date-picker__year[data-v-f8f5dfac]{width:60px}.date-picker__drop-day[data-v-f8f5dfac]{width:55px}.date-picker__drop-month[data-v-f8f5dfac]{width:115px}.date-picker__drop-year[data-v-f8f5dfac]{width:75px}.date-picker input[data-v-f8f5dfac]{border:none;border-radius:4px;color:#004c8f;font-size:16px;height:32px;outline:none;text-align:center;width:100%}.date-picker input[data-v-f8f5dfac]::-moz-placeholder{font-size:12px}.date-picker input[data-v-f8f5dfac]::placeholder{font-size:12px}.date-picker ul[data-v-f8f5dfac]{background-color:#fff;box-shadow:1px 1px 3px 1px rgba(0,0,0,.4);color:#004c8f;height:150px;overflow:hidden;overflow-y:scroll;position:absolute;text-align:center;z-index:2}.date-picker li[data-v-f8f5dfac]:hover{background-color:#96bdd5;color:#fff;cursor:pointer}",""]);const s=n},269:(t,e,i)=>{i.d(e,{Z:()=>s});var a=i(3645),n=i.n(a)()((function(t){return t[1]}));n.push([t.id,".settings-page[data-v-94d8bff8]{width:900px}.setting-form[data-v-94d8bff8]{border:1px solid #b3b3b3;border-radius:10px;margin-bottom:16px;padding:16px;width:100%}.setting-form label[data-v-94d8bff8]{flex:90px 0 0;font-size:13px;margin-right:8px}.setting-form input[data-v-94d8bff8]{border:none;border-radius:4px;color:#004c8f;flex-grow:1;font-size:15px;height:32px;margin-right:8px;padding:0 8px;text-align:center}.setting-form a[data-v-94d8bff8]{color:green}.setting-form__date[data-v-94d8bff8]{border:1px dotted grey;border-radius:5px;margin-bottom:24px;padding:8px 16px 0}.setting-form__item[data-v-94d8bff8]{align-items:center;display:flex;margin-bottom:12px;position:relative}.setting-form__mechanic[data-v-94d8bff8]{cursor:default;letter-spacing:1px;width:350px}.setting-form__customer[data-v-94d8bff8]{letter-spacing:1px;width:400px}.setting-form__address[data-v-94d8bff8]{flex:400px 0 1;letter-spacing:1px}.setting-form__drop-list[data-v-94d8bff8]{background-color:#fff;border:1px solid #000;border-radius:4px;box-shadow:1px 1px 2px 1px rgba(0,0,0,.4);padding:4px 0;position:absolute;right:64px;top:32px;width:350px;z-index:1}.setting-form__drop-item[data-v-94d8bff8]{cursor:pointer;padding:8px;text-align:start}.setting-form__drop-item[data-v-94d8bff8]:hover{background-color:#d9d9d9}.close-btn[data-v-94d8bff8]{cursor:pointer;padding-right:8px;text-align:end}",""]);const s=n},9808:(t,e,i)=>{i.r(e),i.d(e,{default:()=>h});const a={name:"DatePicker",props:["date"],computed:{getDateFrom:function(){return this.date}},data:function(){return{isDayListOpen:!1,isMonthListOpen:!1,isYearListOpen:!1,monthList:["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"],yearList:["23","24","25","26","27","28","29"],day:this.date.day||"",month:this.date.month||"",year:this.date.year||""}},methods:{toggleDayList:function(){this.isDayListOpen=!this.isDayListOpen,this.isMonthListOpen=!1,this.isYearListOpen=!1},toggleMonthList:function(){this.isMonthListOpen=!this.isMonthListOpen,this.isDayListOpen=!1,this.isYearListOpen=!1},toggleYearList:function(){this.isYearListOpen=!this.isYearListOpen,this.isDayListOpen=!1,this.isMonthListOpen=!1},selectDay:function(t){this.day=t,this.$emit("updateDay",this.day),this.isDayListOpen=!1},selectMonth:function(t,e){this.month=t,this.$emit("updateMonth",e),this.isMonthListOpen=!1},selectYear:function(t){this.year=t,this.$emit("updateYear",this.year),this.isYearListOpen=!1}}};var n=i(3379),s=i.n(n),r=i(2562),o={insert:"head",singleton:!1};s()(r.Z,o);r.Z.locals;var c=i(1900);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function p(t,e,i){return(e=function(t){var e=function(t,e){if("object"!==d(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,e||"default");if("object"!==d(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===d(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const f={name:"Settings",components:{DatePicker:(0,c.Z)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"date-picker"},[i("div",{staticClass:"date-picker__item date-picker__day"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.getDateFrom.day,expression:"getDateFrom.day"}],attrs:{type:"text",placeholder:"День",required:""},domProps:{value:t.getDateFrom.day},on:{click:t.toggleDayList,input:function(e){e.target.composing||t.$set(t.getDateFrom,"day",e.target.value)}}}),t._v(" "),t.isDayListOpen?i("ul",{staticClass:"date-picker__drop-day"},t._l(31,(function(e){return i("li",{key:e,on:{click:function(i){return t.selectDay(e)}}},[t._v("\n                "+t._s(e)+"\n            ")])})),0):t._e()]),t._v(" "),i("div",{staticClass:"date-picker__item date-picker__month"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.monthList[t.getDateFrom.month-1],expression:"monthList[getDateFrom.month - 1]"}],attrs:{type:"text",placeholder:"Месяц",required:""},domProps:{value:t.monthList[t.getDateFrom.month-1]},on:{click:t.toggleMonthList,input:function(e){e.target.composing||t.$set(t.monthList,t.getDateFrom.month-1,e.target.value)}}}),t._v(" "),t.isMonthListOpen?i("ul",{staticClass:"date-picker__drop-month"},t._l(t.monthList,(function(e,a){return i("li",{key:e,on:{click:function(i){return t.selectMonth(e,a+1)}}},[t._v("\n                "+t._s(e)+"\n            ")])})),0):t._e()]),t._v(" "),i("div",{staticClass:"date-picker__item date-picker__year"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.getDateFrom.year,expression:"getDateFrom.year"}],attrs:{type:"text",placeholder:"Год",required:""},domProps:{value:t.getDateFrom.year},on:{click:t.toggleYearList,input:function(e){e.target.composing||t.$set(t.getDateFrom,"year",e.target.value)}}}),t._v(" "),t.isYearListOpen?i("ul",{staticClass:"date-picker__drop-year"},t._l(t.yearList,(function(e){return i("li",{key:e,on:{click:function(i){return t.selectYear(e)}}},[t._v("\n                20"+t._s(e)+"\n            ")])})),0):t._e()])])}),[],!1,null,"f8f5dfac",null).exports},data:function(){return{errored:!1,loading:!0,isMechanicListOpen:!1,isDispetcherListOpen:!1,isSameDate:!1,showDetails:!1,driverList:[],dateFrom:{day:"",month:"",year:""},dateTo:{day:"",month:"",year:""},settingId:null,customer:"",address:"",dispetcher:{},mechanic:{}}},computed:{dispetcherFullName:function(){return"".concat(this.dispetcher.last_name," ").concat(this.dispetcher.first_name," ").concat(this.dispetcher.middle_name)||""},mechanicFullName:function(){return"".concat(this.mechanic.last_name," ").concat(this.mechanic.first_name," ").concat(this.mechanic.middle_name)||""}},mounted:function(){this.getSettings(),this.getAllDrivers()},methods:{getSettings:function(){var t=this;axios.get("/api/V1/settings").then((function(e){var i=e.data.data[0];t.settingId=i.id,t.dateFrom=JSON.parse(i.date_from),t.dateTo=JSON.parse(i.date_to),t.customer=i.customer,t.address=i.address,t.dispetcher=JSON.parse(i.dispetcher),t.mechanic=JSON.parse(i.mechanic),t.dateFrom.day===t.dateTo.day&&t.dateFrom.month===t.dateTo.month&&t.dateFrom.year===t.dateTo.year&&(t.isSameDate=!0)})).catch((function(e){console.log(e),t.errored=!0})).finally((function(){t.loading=!1}))},getAllDrivers:function(){var t=this;axios.get("/api/V1/drivers").then((function(e){t.driverList=e.data.data})).catch((function(e){console.log(e),t.errored=!0})).finally((function(){t.loading=!1}))},toggleDispetcherList:function(){this.isDispetcherListOpen=!this.isDispetcherListOpen},toggleMechanicList:function(){this.isMechanicListOpen=!this.isMechanicListOpen},selectDispetcher:function(t){this.dispetcher=t,this.isDispetcherListOpen=!1},selectMechanic:function(t){this.mechanic=t,this.isMechanicListOpen=!1},updateSetting:function(){var t=this;this.loading=!0,axios.post("/api/V1/settings/"+this.settingId,{_method:"PUT",date_from:JSON.stringify(this.dateFrom),date_to:JSON.stringify(this.dateTo),customer:this.customer,address:this.address,dispetcher:JSON.stringify(this.dispetcher),mechanic:JSON.stringify(this.mechanic)}).then((function(t){})).catch((function(e){console.log(e),t.errored=!0})).finally((function(){t.loading=!1}))},updateDayFrom:function(t){this.dateFrom.day=t},updateMonthFrom:function(t){this.dateFrom.month=t},updateYearFrom:function(t){this.dateFrom.year=t},updateDayTo:function(t){this.dateTo.day=t},updateMonthTo:function(t){this.dateTo.month=t},updateYearTo:function(t){this.dateTo.year=t},makeSameDate:function(){this.dateTo=this.dateFrom,this.isSameDate=!0},makeDiffDate:function(){this.dateTo=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){p(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},this.dateFrom),this.isSameDate=!1},goBack:function(){this.$router.go(-1)}}};var m=i(269),u={insert:"head",singleton:!1};s()(m.Z,u);m.Z.locals;const h=(0,c.Z)(f,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page settings-page"},[i("h1",{staticClass:"page__title"},[t._v("Настройки")]),t._v(" "),t.loading?i("app-loader"):t._e(),t._v(" "),t.errored?i("error-notification"):t._e(),t._v(" "),i("div",{staticClass:"setting-form"},[i("div",{staticClass:"setting-form__date"},[i("div",{staticClass:"setting-form__item"},[i("label",{attrs:{for:""}},[t._v("Дата выезда: ")]),t._v(" "),i("date-picker",{attrs:{date:t.dateFrom},on:{updateDay:t.updateDayFrom,updateMonth:t.updateMonthFrom,updateYear:t.updateYearFrom}})],1),t._v(" "),i("div",{staticClass:"setting-form__item"},[i("label",{attrs:{for:""}},[t._v("Дата заезда: ")]),t._v(" "),t.isSameDate?t._e():i("date-picker",{attrs:{date:t.dateTo},on:{updateDay:t.updateDayTo,updateMonth:t.updateMonthTo,updateYear:t.updateYearTo}}),t._v(" "),t.isSameDate?t._e():i("a",{attrs:{href:"#"},on:{click:t.makeSameDate}},[t._v("Заезд в тот же день")]),t._v(" "),t.isSameDate?i("a",{attrs:{href:"#"},on:{click:t.makeDiffDate}},[t._v("Добавить дату заезда")]):t._e()],1)]),t._v(" "),i("div",{staticClass:"setting-form__item"},[t.showDetails?t._e():i("a",{attrs:{href:"#"},on:{click:function(e){t.showDetails=!t.showDetails}}},[t._v("Подробнее:")]),t._v(" "),t.showDetails?i("a",{attrs:{href:"#"},on:{click:function(e){t.showDetails=!t.showDetails}}},[t._v("Скрыть:")]):t._e()]),t._v(" "),t.showDetails?i("div",[i("div",{staticClass:"setting-form__item"},[i("label",{attrs:{for:""}},[t._v("заказчик: ")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.customer,expression:"customer"}],staticClass:"setting-form__customer",attrs:{type:"text",required:""},domProps:{value:t.customer},on:{input:function(e){e.target.composing||(t.customer=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"setting-form__item"},[i("label",{attrs:{for:""}},[t._v("адрес подачи: ")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"setting-form__address",attrs:{type:"text",required:""},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"setting-form__item"},[i("label",{attrs:{for:""}},[t._v("диспетчер: ")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.dispetcherFullName,expression:"dispetcherFullName"}],staticClass:"setting-form__mechanic",attrs:{type:"text",readonly:""},domProps:{value:t.dispetcherFullName},on:{click:t.toggleDispetcherList,input:function(e){e.target.composing||(t.dispetcherFullName=e.target.value)}}}),t._v(" "),t.isDispetcherListOpen?i("ul",{staticClass:"setting-form__drop-list"},[i("li",{staticClass:"close-btn",on:{click:t.toggleDispetcherList}},[t._v("x")]),t._v(" "),t._l(t.driverList,(function(e){return i("li",{key:e.id,staticClass:"setting-form__drop-item",on:{click:function(i){return t.selectDispetcher(e)}}},[t._v("\n                        "+t._s(e.last_name)+" "+t._s(e.first_name)+" "+t._s(e.middle_name)+"\n                    ")])}))],2):t._e()]),t._v(" "),i("div",{staticClass:"setting-form__item"},[i("label",{attrs:{for:""}},[t._v("механик: ")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.mechanicFullName,expression:"mechanicFullName"}],staticClass:"setting-form__mechanic",attrs:{type:"text",readonly:""},domProps:{value:t.mechanicFullName},on:{click:t.toggleMechanicList,input:function(e){e.target.composing||(t.mechanicFullName=e.target.value)}}}),t._v(" "),t.isMechanicListOpen?i("ul",{staticClass:"setting-form__drop-list"},[i("li",{staticClass:"close-btn",on:{click:t.toggleMechanicList}},[t._v("x")]),t._v(" "),t._l(t.driverList,(function(e){return i("li",{key:e.id,staticClass:"setting-form__drop-item",on:{click:function(i){return t.selectMechanic(e)}}},[t._v("\n                        "+t._s(e.last_name)+" "+t._s(e.first_name)+" "+t._s(e.middle_name)+"\n                    ")])}))],2):t._e()])]):t._e()]),t._v(" "),i("div",{staticClass:"app-btn-group"},[i("button",{staticClass:"app-btn app-btn__back mr-16",on:{click:function(e){return e.preventDefault(),t.goBack.apply(null,arguments)}}},[t._v("\n            Назад\n        ")]),t._v(" "),i("button",{staticClass:"app-btn app-btn__save",on:{click:function(e){return e.preventDefault(),t.updateSetting.apply(null,arguments)}}},[t._v("\n            Сохранить\n        ")])])],1)}),[],!1,null,"94d8bff8",null).exports}}]);